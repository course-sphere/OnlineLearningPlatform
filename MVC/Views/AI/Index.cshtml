@{
    ViewData["Title"] = "AI Tutor Test";
}

<h2>🤖 AI Tutor – Test Page</h2>

<form id="aiForm">
    <div class="mb-3">
        <label class="form-label">Nhập câu hỏi bài tập</label>
        <textarea id="question"
                  class="form-control"
                  rows="4"
                  placeholder="Ví dụ: Which individual coined the term data science?"
                  required></textarea>
    </div>

    <button class="btn btn-primary" type="submit">
        Gửi cho AI
    </button>
</form>

<!-- AI Thinking -->
<div id="thinking" style="display:none; margin-top:20px;">
    <div class="alert alert-info">
        🤖 <strong>AI đang suy nghĩ...</strong><br />
        Vui lòng chờ trong giây lát ⏳
    </div>
</div>

<!-- Result -->
<div id="result" style="display:none; margin-top:20px;">
    <h4>📘 AI Guidance</h4>
    <pre id="resultContent"
         style="background:#f5f5f5; padding:15px; border-radius:6px;"></pre>
</div>

<script>
    document.getElementById("aiForm").addEventListener("submit", async function (e) {
        e.preventDefault();

        const question = document.getElementById("question").value;

        // Show thinking
        document.getElementById("thinking").style.display = "block";
        document.getElementById("result").style.display = "none";

        const response = await fetch("/AI/Test", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ question })
        });

        const data = await response.json();

        // Hide thinking
        document.getElementById("thinking").style.display = "none";

        // Show result
        document.getElementById("result").style.display = "block";
        document.getElementById("resultContent").innerText =
            data.guidance || JSON.stringify(data, null, 2);
    });
</script>
