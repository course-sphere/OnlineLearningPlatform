@using System.Security.Claims

<header class="flex items-center justify-between px-6 py-3 bg-white border-b border-zinc-200 sticky top-0 z-30 h-16 shadow-sm/50">

    <div class="flex items-center gap-4">
        <button @@click="sidebarOpen = !sidebarOpen"
                class="p-2 text-zinc-500 rounded-md hover:bg-zinc-100 hover:text-zinc-900 focus:outline-none transition-colors">
            <i class="fas fa-bars text-lg"></i>
        </button>

        <div class="h-6 w-px bg-zinc-200 hidden sm:block"></div>

        <h1 class="text-lg font-bold text-zinc-800 tracking-tight hidden sm:block truncate">
            @ViewData["Title"]
        </h1>
    </div>

    <div class="flex items-center gap-5">
        <div class="relative" x-data="{ open: false }">
            <button @@click="open = !open" @@click.away="open = false"
                    class="flex items-center gap-3 group outline-none">

                <div class="text-right hidden sm:block leading-tight">
                    <div class="text-sm font-semibold text-zinc-900">@User.Identity.Name</div>
                    <div class="text-[11px] font-medium text-zinc-500 uppercase">Administrator</div>
                </div>

                @{ var avatar = User.FindFirst("Avatar")?.Value; }
                @if (!string.IsNullOrEmpty(avatar)) {
                <img class="h-9 w-9 rounded-full object-cover border border-zinc-200" src="@avatar">
                } else {
                <div class="h-9 w-9 rounded-full bg-zinc-900 text-white flex items-center justify-center font-bold text-xs">AD</div>
                }
                <i class="fas fa-chevron-down text-[10px] text-zinc-400" :class="open ? 'rotate-180' : ''"></i>
            </button>

            <div x-show="open" x-transition class="absolute right-0 mt-3 w-48 bg-white rounded-lg shadow-xl border border-zinc-100 py-1 z-50 origin-top-right" x-cloak>
                <div class="px-4 py-2 border-b border-zinc-50 mb-1">
                    <p class="text-xs text-zinc-400 font-semibold uppercase">My Account</p>
                </div>
                <a href="#" class="block px-4 py-2 text-sm text-zinc-600 hover:bg-zinc-50">Profile</a>
                <div class="border-t border-zinc-50 my-1"></div>
                <form asp-controller="Auth" asp-action="Logout" method="post">
                    <button class="block w-full text-left px-4 py-2 text-sm text-rose-600 hover:bg-rose-50 font-medium">Log out</button>
                </form>
            </div>
        </div>
    </div>
</header>